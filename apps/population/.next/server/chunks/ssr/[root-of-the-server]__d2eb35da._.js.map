{"version":3,"sources":["../../../../app/page.tsx"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nfunction loadConfig() {\n  try {\n    const cfgPath = path.resolve(process.cwd(), 'config.json');\n    const raw = fs.readFileSync(cfgPath, 'utf8');\n    return JSON.parse(raw);\n  } catch (e) {\n    return {\n      initialPopulation: 8900000,\n      fertilityRate: 1.4,\n      lifespan: 80,\n      startYear: 2025,\n      endYear: 2100,\n      muslimShare: 0.062, // ~0.55 / 8.9\n      muslimFertility: 2.0,\n    };\n  }\n}\n\nfunction simulateByAges(initialPop: number, fertility: number, lifespan: number, startYear: number, endYear: number) {\n  const years = [];\n  const values = [];\n  const ages = new Array(lifespan).fill(initialPop / lifespan);\n  for (let year = startYear; year <= endYear; year++) {\n    years.push(year);\n    values.push(ages.reduce((s, v) => s + v, 0));\n    const females30 = ages[30] * 0.5;\n    const births = females30 * fertility;\n    for (let a = lifespan - 1; a >= 1; a--) ages[a] = ages[a - 1];\n    ages[0] = births;\n  }\n  return { years, values };\n}\n\nfunction buildPath(values: number[], width: number, height: number, padding: { l: number; r: number; t: number; b: number }, maxY: number) {\n  const { l, r, t, b } = padding;\n  const innerW = width - l - r;\n  const innerH = height - t - b;\n  const minY = 0;\n  const top = Math.max(maxY, 1e-9);\n\n  return values\n    .map((v, i) => {\n      const x = l + (innerW * i) / (values.length - 1);\n      const y = t + innerH - ((v - minY) / (top - minY)) * innerH;\n      return `${i === 0 ? 'M' : 'L'}${x.toFixed(2)} ${y.toFixed(2)}`;\n    })\n    .join(' ');\n}\n\nexport default function Home() {\n  const cfg = loadConfig();\n  const START_YEAR = cfg.startYear;\n  const END_YEAR = cfg.endYear;\n  const LIFESPAN = cfg.lifespan;\n  const total0 = cfg.initialPopulation;\n  const totalFert = cfg.fertilityRate;\n  const muslimInit = cfg.muslimInitialPopulation ?? null;\n  const muslimShare = cfg.muslimShare ?? 0.062;\n  const muslim0 = muslimInit !== null ? Number(muslimInit) : total0 * muslimShare;\n  const muslimFert = cfg.muslimFertility ?? cfg.fertilityRate;\n  const nonMuslim0 = total0 - muslim0;\n  const nonMuslimFert = totalFert; // assume same unless configured\n\n  const simTotal = simulateByAges(total0, totalFert, LIFESPAN, START_YEAR, END_YEAR);\n  const simMuslim = simulateByAges(muslim0, muslimFert, LIFESPAN, START_YEAR, END_YEAR);\n  const simNon = simulateByAges(nonMuslim0, nonMuslimFert, LIFESPAN, START_YEAR, END_YEAR);\n\n  const valuesM = simTotal.values.map((v) => v / 1e6);\n  const valuesMusM = simMuslim.values.map((v) => v / 1e6);\n  const valuesNonM = simNon.values.map((v) => v / 1e6);\n\n  const W = 1000;\n  const H = 560;\n  const pad = { l: 110, r: 40, t: 50, b: 90 };\n\n  const maxPop = Math.max(...valuesM, ...valuesMusM, ...valuesNonM);\n  const midPop = maxPop / 2;\n\n  const pathTotal = buildPath(valuesM, W, H, pad, maxPop);\n  const pathMus = buildPath(valuesMusM, W, H, pad, maxPop);\n  const pathNon = buildPath(valuesNonM, W, H, pad, maxPop);\n\n  return (\n    <main className=\"min-h-screen bg-black text-white p-4\">\n      <div className=\"w-full max-w-6xl mx-auto\">\n        <p className=\"text-center text-xl text-white/70 mt-2 mb-2\">Population of Switzerland (simulation)</p>\n        <div className=\"flex flex-col items-center\">\n          <div className=\"text-center text-base text-white/80 mb-6 space-y-2\">\n            <div>Population (estimate): ~8.9 million</div>\n            <div>Fertility rate (estimate): ~1.4</div>\n            <div>Muslim population (estimate): ~0.55 million</div>\n            <div>Muslim fertility rate (estimate): ~2.0</div>\n          </div>\n          <div className=\"bg-black w-full\">\n            <svg viewBox={`0 0 ${W} ${H}`} className=\"w-full h-auto\">\n              <text x=\"110\" y=\"510\" fill=\"white\" fontSize=\"26\">2025</text>\n              <text x=\"390\" y=\"510\" fill=\"white\" fontSize=\"26\" textAnchor=\"middle\">2050</text>\n              <text x=\"680\" y=\"510\" fill=\"white\" fontSize=\"26\" textAnchor=\"middle\">2075</text>\n              <text x=\"960\" y=\"510\" fill=\"white\" fontSize=\"26\" textAnchor=\"end\">2100</text>\n              <text x=\"80\" y=\"470\" fill=\"white\" fontSize=\"26\" textAnchor=\"end\">0</text>\n              <text x=\"80\" y=\"260\" fill=\"white\" fontSize=\"26\" textAnchor=\"end\">{midPop.toFixed(1)}</text>\n              <text x=\"80\" y=\"60\" fill=\"white\" fontSize=\"26\" textAnchor=\"end\">{maxPop.toFixed(1)}</text>\n              <text x=\"520\" y=\"545\" fill=\"white\" fontSize=\"26\" textAnchor=\"middle\">Year (2025â€“2100)</text>\n              <text x=\"30\" y=\"260\" fill=\"white\" fontSize=\"26\" textAnchor=\"middle\" transform=\"rotate(-90 30 260)\">Population (millions)</text>\n\n              {/* Non-Muslim (dashed) */}\n              <path d={pathNon} stroke=\"#a0a0a0\" strokeWidth=\"2\" fill=\"none\" strokeDasharray=\"8 6\" />\n              {/* Muslim (colored) */}\n              <path d={pathMus} stroke=\"#ffd700\" strokeWidth=\"2\" fill=\"none\" />\n              {/* Total (white) */}\n              <path d={pathTotal} stroke=\"white\" strokeWidth=\"3\" fill=\"none\" />\n            </svg>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}